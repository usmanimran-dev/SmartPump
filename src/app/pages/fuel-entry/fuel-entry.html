<div class="p-6 max-w-2xl mx-auto">
  <div class="dashboard-card">
    <div class="mb-6">
      <h2 class="text-2xl font-bold text-slate-100 mb-1">AI Fuel Intelligence</h2>
      <p class="text-slate-400 text-sm">Station: {{ userProfile()?.stationId }} | Real-time Anomaly Check</p>
    </div>

    <form [formGroup]="fuelForm" (ngSubmit)="saveFuelEntry()" class="space-y-6">
      <div class="grid gap-6 md:grid-cols-2">
        <div class="col-span-full md:col-span-1">
          <label class="block text-sm font-medium text-slate-300 mb-2">Target Shift</label>
          <select class="input-field" formControlName="shiftId">
            <option value="" disabled>Select active shift...</option>
            <option *ngFor="let s of shifts()" [value]="s.id">
              {{ s.id }} ({{ s.staffId }})
            </option>
            <option *ngIf="shifts().length === 0" value="manual">Manual Entry (No active shifts)</option>
          </select>
        </div>

        <div class="col-span-full md:col-span-1">
          <label class="block text-sm font-medium text-slate-300 mb-2">Entry Date</label>
          <input type="date" class="input-field" formControlName="date" />
        </div>

        <div class="col-span-full md:col-span-1">
          <label class="block text-sm font-medium text-slate-300 mb-2">Sold Litres (L)</label>
          <input type="number" step="0.01" class="input-field" formControlName="soldLitres" />
        </div>

        <div class="col-span-full md:col-span-1">
          <label class="block text-sm font-medium text-slate-300 mb-2">Price Per Litre (PKR)</label>
          <input type="number" step="0.01" class="input-field" formControlName="pricePerLitre" />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-300 mb-2">Opening Stock (L)</label>
          <input type="number" step="0.01" class="input-field" formControlName="openingStock" />
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-300 mb-2">Closing Stock (L)</label>
          <input type="number" step="0.01" class="input-field" formControlName="closingStock" />
        </div>

        <!-- AI Indicators -->
        <div class="col-span-full grid grid-cols-2 gap-4">
          <div class="p-4 rounded-lg border border-slate-700/50 bg-slate-900/50">
            <span class="text-[10px] uppercase tracking-wider text-slate-500 font-bold block mb-1">Total Revenue</span>
            <span class="text-lg font-bold text-indigo-400 font-mono-numbers">
              Rs. {{ revenue() | number:'1.0-0' }}
            </span>
          </div>
          <div class="p-4 rounded-lg border border-slate-700/50 bg-slate-900/50">
            <span class="text-[10px] uppercase tracking-wider text-slate-500 font-bold block mb-1">AI Variance</span>
            <span class="text-lg font-bold font-mono-numbers"
              [ngClass]="{'text-rose-400': variance() != 0, 'text-emerald-400': variance() == 0}">
              {{ variance() | number:'1.2-2' }} L
            </span>
          </div>
        </div>
      </div>

      <div class="pt-4">
        <button type="submit" class="btn-primary w-full shadow-indigo-500/20" [disabled]="fuelForm.invalid"
          [class.opacity-50]="fuelForm.invalid">
          Sync with AI Engine
        </button>
      </div>
    </form>
  </div>
</div>